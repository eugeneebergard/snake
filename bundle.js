(()=>{var e=document.getElementById("score"),t=document.getElementById("game"),n=document.getElementById("borders-btn"),d=document.getElementById("state-borders"),l=t.getContext("2d"),s=16,o=0,c=4,r=0,a=!1,i={x:160,y:160,dx:s,dy:0,cells:[],maxCells:4},x={x:320,y:320};function y(e,t){return Math.floor(Math.random()*(t-e))+e}function f(){x.x=y(0,25)*s,x.y=y(0,25)*s}function m(){i.x=160,i.y=160,i.cells=[],i.maxCells=4,i.dx=s,i.dy=0,r=0,e.textContent=r.toString(),f()}document.addEventListener("keydown",(function(e){switch(e.which){case 16:c=2;break;case 27:m();break;case 37:0===i.dx&&(i.dx=-16,i.dy=0);break;case 38:0===i.dy&&(i.dy=-16,i.dx=0);break;case 39:0===i.dx&&(i.dx=s,i.dy=0);break;case 40:0===i.dy&&(i.dy=s,i.dx=0)}})),document.addEventListener("keyup",(function(e){16===e.which&&(c=4)})),n.addEventListener("click",(function(){(a=!a)?(d.textContent="on",t.classList.add("borders_on"),t.classList.remove("borders_off")):(d.textContent="off",t.classList.add("borders_off"),t.classList.remove("borders_on")),m()})),requestAnimationFrame((function n(){requestAnimationFrame(n),++o<c||(o=0,l.clearRect(0,0,t.width,t.height),i.x+=i.dx,i.y+=i.dy,i.x<0?a?m():i.x=t.width-s:i.x>=t.width&&(a?m():i.x=0),i.y<0?a?m():i.y=t.height-s:i.y>=t.height&&(a?m():i.y=0),i.cells.unshift({x:i.x,y:i.y}),i.cells.length>i.maxCells&&i.cells.pop(),l.fillStyle="red",l.fillRect(x.x,x.y,15,15),l.fillStyle="green",i.cells.forEach((function(t,n){l.fillRect(t.x,t.y,15,15),t.x===x.x&&t.y===x.y&&(i.maxCells++,f(),r++,e.textContent=r.toString());for(var d=n+1;d<i.cells.length;d++)t.x===i.cells[d].x&&t.y===i.cells[d].y&&m()})))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVuRHRDLEVBQVF1QyxVQUFZLE1BQ3BCdkMsRUFBUXdDLFNBQVMxQixFQUFNTixFQUFHTSxFQUFNTCxFQUFHUCxHQUFVQSxJQUU3Q0YsRUFBUXVDLFVBQVksUUFFcEJoQyxFQUFNSyxNQUFNNkIsU0FBUSxTQUFDQyxFQUFNQyxHQUN6QjNDLEVBQVF3QyxTQUFTRSxFQUFLbEMsRUFBR2tDLEVBQUtqQyxFQUFHUCxHQUFVQSxJQUV2Q3dDLEVBQUtsQyxJQUFNTSxFQUFNTixHQUFLa0MsRUFBS2pDLElBQU1LLEVBQU1MLElBQ3pDRixFQUFNTSxXQUVOUSxJQUVBaEIsSUFDQVgsRUFBTTZCLFlBQWNsQixFQUFZbUIsWUFFbEMsSUFBSyxJQUFJb0IsRUFBSUQsRUFBUSxFQUFHQyxFQUFJckMsRUFBTUssTUFBTXlCLE9BQVFPLElBQzFDRixFQUFLbEMsSUFBTUQsRUFBTUssTUFBTWdDLEdBQUdwQyxHQUFLa0MsRUFBS2pDLElBQU1GLEVBQU1LLE1BQU1nQyxHQUFHbkMsR0FDM0RhLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbmFrZS8uL3NyYy9zbmFrZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgSUNvb3JkaW5hdGVzIHtcbiAgeDogbnVtYmVyLFxuICB5OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElTbmFrZSBleHRlbmRzIElDb29yZGluYXRlcyB7XG4gIGR4OiBudW1iZXIsXG4gIGR5OiBudW1iZXIsXG4gIGNlbGxzOiBJQ29vcmRpbmF0ZXNbXSxcbiAgbWF4Q2VsbHM6IG51bWJlcixcbn1cblxuaW50ZXJmYWNlIElBcHBsZSBleHRlbmRzIElDb29yZGluYXRlcyB7fVxuXG5jb25zdCBzY29yZSA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbmNvbnN0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpO1xuY29uc3QgYm9yZGVyc0J0biA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9yZGVycy1idG4nKTtcbmNvbnN0IGJvcmRlcnNTdGF0ZURpc3BsYXkgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlLWJvcmRlcnMnKTtcbmNvbnN0IGNvbnRleHQgPSA8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5jb25zdCBncmlkOiBudW1iZXIgPSAxNjtcbmxldCBjb3VudDogbnVtYmVyID0gMDtcbmxldCBnYW1lU3BlZWQ6IG51bWJlciA9IDQ7XG5sZXQgYXBwbGVzRWF0ZW46IG51bWJlciA9IDA7XG5sZXQgc3RhdGVCb3JkZXJzOiBib29sZWFuID0gZmFsc2U7XG5cbmNvbnN0IHNuYWtlOiBJU25ha2UgPSB7XG4gIHg6IDE2MCxcbiAgeTogMTYwLFxuICBkeDogZ3JpZCxcbiAgZHk6IDAsXG4gIGNlbGxzOiBbXSxcbiAgbWF4Q2VsbHM6IDRcbn1cblxuY29uc3QgYXBwbGU6IElBcHBsZSA9IHtcbiAgeDogMzIwLFxuICB5OiAzMjBcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFwcGxlKCk6IHZvaWQge1xuICBhcHBsZS54ID0gZ2V0UmFuZG9tSW50KDAsIDI1KSAqIGdyaWQ7XG4gIGFwcGxlLnkgPSBnZXRSYW5kb21JbnQoMCwgMjUpICogZ3JpZDtcbn1cblxuZnVuY3Rpb24gcmVzdGFydCgpOiB2b2lkIHtcbiAgc25ha2UueCA9IDE2MDtcbiAgc25ha2UueSA9IDE2MDtcbiAgc25ha2UuY2VsbHMgPSBbXTtcbiAgc25ha2UubWF4Q2VsbHMgPSA0O1xuICBzbmFrZS5keCA9IGdyaWQ7XG4gIHNuYWtlLmR5ID0gMDtcblxuICBhcHBsZXNFYXRlbiA9IDA7XG4gIHNjb3JlLnRleHRDb250ZW50ID0gYXBwbGVzRWF0ZW4udG9TdHJpbmcoKTtcblxuICBjcmVhdGVBcHBsZSgpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVCb3JkZXJzKCkge1xuICBzdGF0ZUJvcmRlcnMgPSAhc3RhdGVCb3JkZXJzO1xuXG4gIGlmIChzdGF0ZUJvcmRlcnMpIHtcbiAgICBib3JkZXJzU3RhdGVEaXNwbGF5LnRleHRDb250ZW50ID0gJ29uJztcbiAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnYm9yZGVyc19vbicpO1xuICAgIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXJzX29mZicpO1xuICB9IGVsc2Uge1xuICAgIGJvcmRlcnNTdGF0ZURpc3BsYXkudGV4dENvbnRlbnQgPSAnb2ZmJztcbiAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnYm9yZGVyc19vZmYnKTtcbiAgICBjYW52YXMuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyc19vbicpO1xuICB9XG5cbiAgcmVzdGFydCgpO1xufVxuXG5mdW5jdGlvbiBsb29wKCk6IHZvaWQge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG5cbiAgaWYgKCsrY291bnQgPCBnYW1lU3BlZWQpIHJldHVybjtcblxuICBjb3VudCA9IDA7XG5cbiAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICBzbmFrZS54ICs9IHNuYWtlLmR4O1xuICBzbmFrZS55ICs9IHNuYWtlLmR5O1xuXG4gIGlmIChzbmFrZS54IDwgMCkgc3RhdGVCb3JkZXJzID8gcmVzdGFydCgpIDogc25ha2UueCA9IGNhbnZhcy53aWR0aCAtIGdyaWQ7XG4gIGVsc2UgaWYgKHNuYWtlLnggPj0gY2FudmFzLndpZHRoKSBzdGF0ZUJvcmRlcnMgPyByZXN0YXJ0KCkgOiBzbmFrZS54ID0gMDtcblxuICBpZiAoc25ha2UueSA8IDApIHN0YXRlQm9yZGVycyA/IHJlc3RhcnQoKSA6IHNuYWtlLnkgPSBjYW52YXMuaGVpZ2h0IC0gZ3JpZDtcbiAgZWxzZSBpZiAoc25ha2UueSA+PSBjYW52YXMuaGVpZ2h0KSBzdGF0ZUJvcmRlcnMgPyByZXN0YXJ0KCkgOiBzbmFrZS55ID0gMDtcblxuICBzbmFrZS5jZWxscy51bnNoaWZ0KHsgeDogc25ha2UueCwgeTogc25ha2UueSB9KTtcblxuICBzbmFrZS5jZWxscy5sZW5ndGggPiBzbmFrZS5tYXhDZWxscyAmJiBzbmFrZS5jZWxscy5wb3AoKTtcblxuICBjb250ZXh0LmZpbGxTdHlsZSA9ICdyZWQnO1xuICBjb250ZXh0LmZpbGxSZWN0KGFwcGxlLngsIGFwcGxlLnksIGdyaWQgLSAxLCBncmlkIC0gMSk7XG5cbiAgY29udGV4dC5maWxsU3R5bGUgPSAnZ3JlZW4nO1xuXG4gIHNuYWtlLmNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgY29udGV4dC5maWxsUmVjdChjZWxsLngsIGNlbGwueSwgZ3JpZCAtIDEsIGdyaWQgLSAxKTtcblxuICAgIGlmIChjZWxsLnggPT09IGFwcGxlLnggJiYgY2VsbC55ID09PSBhcHBsZS55KSB7XG4gICAgICBzbmFrZS5tYXhDZWxscysrO1xuXG4gICAgICBjcmVhdGVBcHBsZSgpO1xuXG4gICAgICBhcHBsZXNFYXRlbisrO1xuICAgICAgc2NvcmUudGV4dENvbnRlbnQgPSBhcHBsZXNFYXRlbi50b1N0cmluZygpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgc25ha2UuY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjZWxsLnggPT09IHNuYWtlLmNlbGxzW2ldLnggJiYgY2VsbC55ID09PSBzbmFrZS5jZWxsc1tpXS55KSB7XG4gICAgICAgIHJlc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgc3dpdGNoIChlLndoaWNoKXtcbiAgICBjYXNlIDE2OlxuICAgICAgLy8gU2hpZnRcbiAgICAgIGdhbWVTcGVlZCA9IDI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI3OlxuICAgICAgLy8gRXNjYXBlXG4gICAgICByZXN0YXJ0KCk7XG4gICAgICBicmVha1xuICAgIGNhc2UgMzc6XG4gICAgICAvLyDQodGC0YDQtdC70LrQsCDQstC70LXQstC+XG4gICAgICBpZiAoc25ha2UuZHggPT09IDApIHtcbiAgICAgICAgc25ha2UuZHggPSAtZ3JpZDtcbiAgICAgICAgc25ha2UuZHkgPSAwO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzODpcbiAgICAgIC8vINCh0YLRgNC10LvQutCwINCy0LLQtdGA0YVcbiAgICAgIGlmIChzbmFrZS5keSA9PT0gMCkge1xuICAgICAgICBzbmFrZS5keSA9IC1ncmlkO1xuICAgICAgICBzbmFrZS5keCA9IDA7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM5OlxuICAgICAgLy8g0KHRgtGA0LXQu9C60LAg0LLQv9GA0LDQstC+XG4gICAgICBpZiAoc25ha2UuZHggPT09IDApIHtcbiAgICAgICAgc25ha2UuZHggPSBncmlkO1xuICAgICAgICBzbmFrZS5keSA9IDA7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQwOlxuICAgICAgLy8g0KHRgtGA0LXQu9C60LAg0LLQvdC40LdcbiAgICAgIGlmIChzbmFrZS5keSA9PT0gMCkge1xuICAgICAgICBzbmFrZS5keSA9IGdyaWQ7XG4gICAgICAgIHNuYWtlLmR4ID0gMDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4ge1xuICBpZihlLndoaWNoID09PSAxNikge1xuICAgIGdhbWVTcGVlZCA9IDQ7XG4gIH1cbn0pO1xuXG5ib3JkZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB0b2dnbGVCb3JkZXJzKClcbn0pO1xuXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4iXSwibmFtZXMiOlsic2NvcmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FudmFzIiwiYm9yZGVyc0J0biIsImJvcmRlcnNTdGF0ZURpc3BsYXkiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImdyaWQiLCJjb3VudCIsImdhbWVTcGVlZCIsImFwcGxlc0VhdGVuIiwic3RhdGVCb3JkZXJzIiwic25ha2UiLCJ4IiwieSIsImR4IiwiZHkiLCJjZWxscyIsIm1heENlbGxzIiwiYXBwbGUiLCJnZXRSYW5kb21JbnQiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjcmVhdGVBcHBsZSIsInJlc3RhcnQiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ3aGljaCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInVuc2hpZnQiLCJsZW5ndGgiLCJwb3AiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZvckVhY2giLCJjZWxsIiwiaW5kZXgiLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==