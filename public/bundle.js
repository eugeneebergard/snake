(()=>{"use strict";const e=document.getElementById("score"),t=document.getElementById("game"),n=document.getElementById("borders-btn"),d=document.getElementById("state-borders"),l=t.getContext("2d"),s=16;let c=0,o=4,r=0,a=!1;const x={x:160,y:160,dx:s,dy:0,cells:[],maxCells:4},y={x:320,y:320};function i(e,t){return Math.floor(Math.random()*(t-e))+e}function m(){y.x=i(0,25)*s,y.y=i(0,25)*s}function h(){x.x=160,x.y=160,x.cells=[],x.maxCells=4,x.dx=s,x.dy=0,r=0,e.textContent=r.toString(),m()}document.addEventListener("keydown",(e=>{switch(e.which){case 16:o=2;break;case 27:h();break;case 37:0===x.dx&&(x.dx=-16,x.dy=0);break;case 38:0===x.dy&&(x.dy=-16,x.dx=0);break;case 39:0===x.dx&&(x.dx=s,x.dy=0);break;case 40:0===x.dy&&(x.dy=s,x.dx=0)}})),document.addEventListener("keyup",(e=>{16===e.which&&(o=4)})),n.addEventListener("click",(()=>{a=!a,a?(d.textContent="on",t.classList.add("borders_on"),t.classList.remove("borders_off")):(d.textContent="off",t.classList.add("borders_off"),t.classList.remove("borders_on")),h()})),requestAnimationFrame((function n(){requestAnimationFrame(n),++c<o||(c=0,l.clearRect(0,0,t.width,t.height),x.x+=x.dx,x.y+=x.dy,x.x<0?a?h():x.x=t.width-s:x.x>=t.width&&(a?h():x.x=0),x.y<0?a?h():x.y=t.height-s:x.y>=t.height&&(a?h():x.y=0),x.cells.unshift({x:x.x,y:x.y}),x.cells.length>x.maxCells&&x.cells.pop(),l.fillStyle="red",l.fillRect(y.x,y.y,15,15),l.fillStyle="green",x.cells.forEach(((t,n)=>{l.fillRect(t.x,t.y,15,15),t.x===y.x&&t.y===y.y&&(x.maxCells++,m(),r++,e.textContent=r.toString());for(let e=n+1;e<x.cells.length;e++)t.x===x.cells[e].x&&t.y===x.cells[e].y&&h()})))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFFQSxNQUFNQSxFQUFxQkMsU0FBU0MsZUFBZSxTQUM3Q0MsRUFBNEJGLFNBQVNDLGVBQWUsUUFDcERFLEVBQWdDSCxTQUFTQyxlQUFlLGVBQ3hERyxFQUFtQ0osU0FBU0MsZUFBZSxpQkFDM0RJLEVBQW9DSCxFQUFPSSxXQUFXLE1BRXREQyxFQUFlLEdBQ3JCLElBQUlDLEVBQWdCLEVBQ2hCQyxFQUFvQixFQUNwQkMsRUFBc0IsRUFDdEJDLEdBQXdCLEVBRTVCLE1BQU1DLEVBQWdCLENBQ3BCQyxFQUFHLElBQ0hDLEVBQUcsSUFDSEMsR0FBSVIsRUFDSlMsR0FBSSxFQUNKQyxNQUFPLEdBQ1BDLFNBQVUsR0FHTkMsRUFBZ0IsQ0FDcEJOLEVBQUcsSUFDSEMsRUFBRyxLQUdMLFNBQVNNLEVBQWFDLEVBQWFDLEdBQ2pDLE9BQU9DLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVlILEVBQU1ELElBQVFBLEVBR25ELFNBQVNLLElBQ1BQLEVBQU1OLEVBQUlPLEVBQWEsRUFBRyxJQUFNYixFQUNoQ1ksRUFBTUwsRUFBSU0sRUFBYSxFQUFHLElBQU1iLEVBR2xDLFNBQVNvQixJQUNQZixFQUFNQyxFQUFJLElBQ1ZELEVBQU1FLEVBQUksSUFDVkYsRUFBTUssTUFBUSxHQUNkTCxFQUFNTSxTQUFXLEVBQ2pCTixFQUFNRyxHQUFLUixFQUNYSyxFQUFNSSxHQUFLLEVBRVhOLEVBQWMsRUFDZFgsRUFBTTZCLFlBQWNsQixFQUFZbUIsV0FFaENILElBaUVGMUIsU0FBUzhCLGlCQUFpQixXQUFZQyxJQUNwQyxPQUFRQSxFQUFFQyxPQUNSLEtBQUssR0FFSHZCLEVBQVksRUFDWixNQUNGLEtBQUssR0FFSGtCLElBQ0EsTUFDRixLQUFLLEdBRWMsSUFBYmYsRUFBTUcsS0FDUkgsRUFBTUcsSUFBSyxHQUNYSCxFQUFNSSxHQUFLLEdBRWIsTUFDRixLQUFLLEdBRWMsSUFBYkosRUFBTUksS0FDUkosRUFBTUksSUFBSyxHQUNYSixFQUFNRyxHQUFLLEdBRWIsTUFDRixLQUFLLEdBRWMsSUFBYkgsRUFBTUcsS0FDUkgsRUFBTUcsR0FBS1IsRUFDWEssRUFBTUksR0FBSyxHQUViLE1BQ0YsS0FBSyxHQUVjLElBQWJKLEVBQU1JLEtBQ1JKLEVBQU1JLEdBQUtULEVBQ1hLLEVBQU1HLEdBQUssT0FNbkJmLFNBQVM4QixpQkFBaUIsU0FBVUMsSUFDbkIsS0FBWkEsRUFBRUMsUUFDSHZCLEVBQVksTUFJaEJOLEVBQVcyQixpQkFBaUIsU0FBUyxLQTVHbkNuQixHQUFnQkEsRUFFWkEsR0FDRlAsRUFBb0J3QixZQUFjLEtBQ2xDMUIsRUFBTytCLFVBQVVDLElBQUksY0FDckJoQyxFQUFPK0IsVUFBVUUsT0FBTyxpQkFFeEIvQixFQUFvQndCLFlBQWMsTUFDbEMxQixFQUFPK0IsVUFBVUMsSUFBSSxlQUNyQmhDLEVBQU8rQixVQUFVRSxPQUFPLGVBRzFCUixPQW9HRlMsdUJBakdBLFNBQVNDLElBQ1BELHNCQUFzQkMsS0FFaEI3QixFQUFRQyxJQUVkRCxFQUFRLEVBRVJILEVBQVFpQyxVQUFVLEVBQUcsRUFBR3BDLEVBQU9xQyxNQUFPckMsRUFBT3NDLFFBRTdDNUIsRUFBTUMsR0FBS0QsRUFBTUcsR0FDakJILEVBQU1FLEdBQUtGLEVBQU1JLEdBRWJKLEVBQU1DLEVBQUksRUFBR0YsRUFBZWdCLElBQVlmLEVBQU1DLEVBQUlYLEVBQU9xQyxNQUFRaEMsRUFDNURLLEVBQU1DLEdBQUtYLEVBQU9xQyxRQUFPNUIsRUFBZWdCLElBQVlmLEVBQU1DLEVBQUksR0FFbkVELEVBQU1FLEVBQUksRUFBR0gsRUFBZWdCLElBQVlmLEVBQU1FLEVBQUlaLEVBQU9zQyxPQUFTakMsRUFDN0RLLEVBQU1FLEdBQUtaLEVBQU9zQyxTQUFRN0IsRUFBZWdCLElBQVlmLEVBQU1FLEVBQUksR0FFeEVGLEVBQU1LLE1BQU13QixRQUFRLENBQUU1QixFQUFHRCxFQUFNQyxFQUFHQyxFQUFHRixFQUFNRSxJQUUzQ0YsRUFBTUssTUFBTXlCLE9BQVM5QixFQUFNTSxVQUFZTixFQUFNSyxNQUFNMEIsTUFFbkR0QyxFQUFRdUMsVUFBWSxNQUNwQnZDLEVBQVF3QyxTQUFTMUIsRUFBTU4sRUFBR00sRUFBTUwsRUFBR1AsR0FBVUEsSUFFN0NGLEVBQVF1QyxVQUFZLFFBRXBCaEMsRUFBTUssTUFBTTZCLFNBQVEsQ0FBQ0MsRUFBTUMsS0FDekIzQyxFQUFRd0MsU0FBU0UsRUFBS2xDLEVBQUdrQyxFQUFLakMsRUFBR1AsR0FBVUEsSUFFdkN3QyxFQUFLbEMsSUFBTU0sRUFBTU4sR0FBS2tDLEVBQUtqQyxJQUFNSyxFQUFNTCxJQUN6Q0YsRUFBTU0sV0FFTlEsSUFFQWhCLElBQ0FYLEVBQU02QixZQUFjbEIsRUFBWW1CLFlBRWxDLElBQUssSUFBSW9CLEVBQUlELEVBQVEsRUFBR0MsRUFBSXJDLEVBQU1LLE1BQU15QixPQUFRTyxJQUMxQ0YsRUFBS2xDLElBQU1ELEVBQU1LLE1BQU1nQyxHQUFHcEMsR0FBS2tDLEVBQUtqQyxJQUFNRixFQUFNSyxNQUFNZ0MsR0FBR25DLEdBQzNEYSxZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc25ha2UvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVNuYWtlLCBJQXBwbGUgfSBmcm9tIFwiLi9zbmFrZS50eXBlc1wiO1xuXG5jb25zdCBzY29yZSA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbmNvbnN0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpO1xuY29uc3QgYm9yZGVyc0J0biA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9yZGVycy1idG4nKTtcbmNvbnN0IGJvcmRlcnNTdGF0ZURpc3BsYXkgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlLWJvcmRlcnMnKTtcbmNvbnN0IGNvbnRleHQgPSA8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5jb25zdCBncmlkOiBudW1iZXIgPSAxNjtcbmxldCBjb3VudDogbnVtYmVyID0gMDtcbmxldCBnYW1lU3BlZWQ6IG51bWJlciA9IDQ7XG5sZXQgYXBwbGVzRWF0ZW46IG51bWJlciA9IDA7XG5sZXQgc3RhdGVCb3JkZXJzOiBib29sZWFuID0gZmFsc2U7XG5cbmNvbnN0IHNuYWtlOiBJU25ha2UgPSB7XG4gIHg6IDE2MCxcbiAgeTogMTYwLFxuICBkeDogZ3JpZCxcbiAgZHk6IDAsXG4gIGNlbGxzOiBbXSxcbiAgbWF4Q2VsbHM6IDRcbn1cblxuY29uc3QgYXBwbGU6IElBcHBsZSA9IHtcbiAgeDogMzIwLFxuICB5OiAzMjBcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFwcGxlKCk6IHZvaWQge1xuICBhcHBsZS54ID0gZ2V0UmFuZG9tSW50KDAsIDI1KSAqIGdyaWQ7XG4gIGFwcGxlLnkgPSBnZXRSYW5kb21JbnQoMCwgMjUpICogZ3JpZDtcbn1cblxuZnVuY3Rpb24gcmVzdGFydCgpOiB2b2lkIHtcbiAgc25ha2UueCA9IDE2MDtcbiAgc25ha2UueSA9IDE2MDtcbiAgc25ha2UuY2VsbHMgPSBbXTtcbiAgc25ha2UubWF4Q2VsbHMgPSA0O1xuICBzbmFrZS5keCA9IGdyaWQ7XG4gIHNuYWtlLmR5ID0gMDtcblxuICBhcHBsZXNFYXRlbiA9IDA7XG4gIHNjb3JlLnRleHRDb250ZW50ID0gYXBwbGVzRWF0ZW4udG9TdHJpbmcoKTtcblxuICBjcmVhdGVBcHBsZSgpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVCb3JkZXJzKCkge1xuICBzdGF0ZUJvcmRlcnMgPSAhc3RhdGVCb3JkZXJzO1xuXG4gIGlmIChzdGF0ZUJvcmRlcnMpIHtcbiAgICBib3JkZXJzU3RhdGVEaXNwbGF5LnRleHRDb250ZW50ID0gJ29uJztcbiAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnYm9yZGVyc19vbicpO1xuICAgIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXJzX29mZicpO1xuICB9IGVsc2Uge1xuICAgIGJvcmRlcnNTdGF0ZURpc3BsYXkudGV4dENvbnRlbnQgPSAnb2ZmJztcbiAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnYm9yZGVyc19vZmYnKTtcbiAgICBjYW52YXMuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyc19vbicpO1xuICB9XG5cbiAgcmVzdGFydCgpO1xufVxuXG5mdW5jdGlvbiBsb29wKCk6IHZvaWQge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG5cbiAgaWYgKCsrY291bnQgPCBnYW1lU3BlZWQpIHJldHVybjtcblxuICBjb3VudCA9IDA7XG5cbiAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICBzbmFrZS54ICs9IHNuYWtlLmR4O1xuICBzbmFrZS55ICs9IHNuYWtlLmR5O1xuXG4gIGlmIChzbmFrZS54IDwgMCkgc3RhdGVCb3JkZXJzID8gcmVzdGFydCgpIDogc25ha2UueCA9IGNhbnZhcy53aWR0aCAtIGdyaWQ7XG4gIGVsc2UgaWYgKHNuYWtlLnggPj0gY2FudmFzLndpZHRoKSBzdGF0ZUJvcmRlcnMgPyByZXN0YXJ0KCkgOiBzbmFrZS54ID0gMDtcblxuICBpZiAoc25ha2UueSA8IDApIHN0YXRlQm9yZGVycyA/IHJlc3RhcnQoKSA6IHNuYWtlLnkgPSBjYW52YXMuaGVpZ2h0IC0gZ3JpZDtcbiAgZWxzZSBpZiAoc25ha2UueSA+PSBjYW52YXMuaGVpZ2h0KSBzdGF0ZUJvcmRlcnMgPyByZXN0YXJ0KCkgOiBzbmFrZS55ID0gMDtcblxuICBzbmFrZS5jZWxscy51bnNoaWZ0KHsgeDogc25ha2UueCwgeTogc25ha2UueSB9KTtcblxuICBzbmFrZS5jZWxscy5sZW5ndGggPiBzbmFrZS5tYXhDZWxscyAmJiBzbmFrZS5jZWxscy5wb3AoKTtcblxuICBjb250ZXh0LmZpbGxTdHlsZSA9ICdyZWQnO1xuICBjb250ZXh0LmZpbGxSZWN0KGFwcGxlLngsIGFwcGxlLnksIGdyaWQgLSAxLCBncmlkIC0gMSk7XG5cbiAgY29udGV4dC5maWxsU3R5bGUgPSAnZ3JlZW4nO1xuXG4gIHNuYWtlLmNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgY29udGV4dC5maWxsUmVjdChjZWxsLngsIGNlbGwueSwgZ3JpZCAtIDEsIGdyaWQgLSAxKTtcblxuICAgIGlmIChjZWxsLnggPT09IGFwcGxlLnggJiYgY2VsbC55ID09PSBhcHBsZS55KSB7XG4gICAgICBzbmFrZS5tYXhDZWxscysrO1xuXG4gICAgICBjcmVhdGVBcHBsZSgpO1xuXG4gICAgICBhcHBsZXNFYXRlbisrO1xuICAgICAgc2NvcmUudGV4dENvbnRlbnQgPSBhcHBsZXNFYXRlbi50b1N0cmluZygpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgc25ha2UuY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjZWxsLnggPT09IHNuYWtlLmNlbGxzW2ldLnggJiYgY2VsbC55ID09PSBzbmFrZS5jZWxsc1tpXS55KSB7XG4gICAgICAgIHJlc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgc3dpdGNoIChlLndoaWNoKXtcbiAgICBjYXNlIDE2OlxuICAgICAgLy8gU2hpZnRcbiAgICAgIGdhbWVTcGVlZCA9IDI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI3OlxuICAgICAgLy8gRXNjYXBlXG4gICAgICByZXN0YXJ0KCk7XG4gICAgICBicmVha1xuICAgIGNhc2UgMzc6XG4gICAgICAvLyDQodGC0YDQtdC70LrQsCDQstC70LXQstC+XG4gICAgICBpZiAoc25ha2UuZHggPT09IDApIHtcbiAgICAgICAgc25ha2UuZHggPSAtZ3JpZDtcbiAgICAgICAgc25ha2UuZHkgPSAwO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzODpcbiAgICAgIC8vINCh0YLRgNC10LvQutCwINCy0LLQtdGA0YVcbiAgICAgIGlmIChzbmFrZS5keSA9PT0gMCkge1xuICAgICAgICBzbmFrZS5keSA9IC1ncmlkO1xuICAgICAgICBzbmFrZS5keCA9IDA7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM5OlxuICAgICAgLy8g0KHRgtGA0LXQu9C60LAg0LLQv9GA0LDQstC+XG4gICAgICBpZiAoc25ha2UuZHggPT09IDApIHtcbiAgICAgICAgc25ha2UuZHggPSBncmlkO1xuICAgICAgICBzbmFrZS5keSA9IDA7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQwOlxuICAgICAgLy8g0KHRgtGA0LXQu9C60LAg0LLQvdC40LdcbiAgICAgIGlmIChzbmFrZS5keSA9PT0gMCkge1xuICAgICAgICBzbmFrZS5keSA9IGdyaWQ7XG4gICAgICAgIHNuYWtlLmR4ID0gMDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4ge1xuICBpZihlLndoaWNoID09PSAxNikge1xuICAgIGdhbWVTcGVlZCA9IDQ7XG4gIH1cbn0pO1xuXG5ib3JkZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB0b2dnbGVCb3JkZXJzKClcbn0pO1xuXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4iXSwibmFtZXMiOlsic2NvcmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FudmFzIiwiYm9yZGVyc0J0biIsImJvcmRlcnNTdGF0ZURpc3BsYXkiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImdyaWQiLCJjb3VudCIsImdhbWVTcGVlZCIsImFwcGxlc0VhdGVuIiwic3RhdGVCb3JkZXJzIiwic25ha2UiLCJ4IiwieSIsImR4IiwiZHkiLCJjZWxscyIsIm1heENlbGxzIiwiYXBwbGUiLCJnZXRSYW5kb21JbnQiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjcmVhdGVBcHBsZSIsInJlc3RhcnQiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ3aGljaCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInVuc2hpZnQiLCJsZW5ndGgiLCJwb3AiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZvckVhY2giLCJjZWxsIiwiaW5kZXgiLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==