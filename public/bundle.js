(()=>{"use strict";const e=document.getElementById("game"),t=e.getContext("2d"),n=document.getElementById("score__counter"),d=document.getElementById("mode"),l=document.getElementById("mode__state"),c=16;let o=0,s=4,r=0,x=!1;const y={x:160,y:160,dx:c,dy:0,cells:[],maxCells:4},a={x:320,y:320};function i(e,t){return Math.floor(Math.random()*(t-e))+e}function m(){a.x=i(0,25)*c,a.y=i(0,25)*c}function h(){y.x=160,y.y=160,y.cells=[],y.maxCells=4,y.dx=c,y.dy=0,r=0,n.textContent=r.toString(),m()}function f(t,n,d){l.textContent=t,e.classList.add(n),e.classList.remove(d)}document.addEventListener("keydown",(e=>{switch(e.which){case 16:s=2;break;case 27:h();break;case 37:0===y.dx&&(y.dx=-16,y.dy=0);break;case 38:0===y.dy&&(y.dy=-16,y.dx=0);break;case 39:0===y.dx&&(y.dx=c,y.dy=0);break;case 40:0===y.dy&&(y.dy=c,y.dx=0)}})),document.addEventListener("keyup",(e=>{16===e.which&&(s=4)})),d.addEventListener("click",(()=>{x=!x,x?f("on","borders_on","borders_off"):f("off","borders_off","borders_on"),h()})),requestAnimationFrame((function d(){requestAnimationFrame(d),++o<s||(o=0,t.clearRect(0,0,e.width,e.height),y.x+=y.dx,y.y+=y.dy,y.x<0?x?h():y.x=e.width-c:y.x>=e.width&&(x?h():y.x=0),y.y<0?x?h():y.y=e.height-c:y.y>=e.height&&(x?h():y.y=0),y.cells.unshift({x:y.x,y:y.y}),y.cells.length>y.maxCells&&y.cells.pop(),t.fillStyle="red",t.fillRect(a.x,a.y,15,15),t.fillStyle="green",y.cells.forEach(((e,d)=>{t.fillRect(e.x,e.y,15,15),e.x===a.x&&e.y===a.y&&(y.maxCells++,m(),r++,n.textContent=r.toString());for(let t=d+1;t<y.cells.length;t++)e.x===y.cells[t].x&&e.y===y.cells[t].y&&h()})))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlOLEVBQU1LLE1BQU04QixNQUVuRDdDLEVBQVE4QyxVQUFZLE1BQ3BCOUMsRUFBUStDLFNBQVM5QixFQUFNTixFQUFHTSxFQUFNTCxFQUFHUCxHQUFVQSxJQUU3Q0wsRUFBUThDLFVBQVksUUFFcEJwQyxFQUFNSyxNQUFNaUMsU0FBUSxDQUFDQyxFQUFNQyxLQUN6QmxELEVBQVErQyxTQUFTRSxFQUFLdEMsRUFBR3NDLEVBQUtyQyxFQUFHUCxHQUFVQSxJQUV2QzRDLEVBQUt0QyxJQUFNTSxFQUFNTixHQUFLc0MsRUFBS3JDLElBQU1LLEVBQU1MLElBQ3pDRixFQUFNTSxXQUVOUSxJQUVBaEIsSUFDQU4sRUFBYXdCLFlBQWNsQixFQUFZbUIsWUFFekMsSUFBSyxJQUFJd0IsRUFBSUQsRUFBUSxFQUFHQyxFQUFJekMsRUFBTUssTUFBTTZCLE9BQVFPLElBQzFDRixFQUFLdEMsSUFBTUQsRUFBTUssTUFBTW9DLEdBQUd4QyxHQUFLc0MsRUFBS3JDLElBQU1GLEVBQU1LLE1BQU1vQyxHQUFHdkMsR0FDM0RhLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbmFrZS8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJU25ha2UsIElBcHBsZSB9IGZyb20gXCIuL3NuYWtlLnR5cGVzXCI7XG5cbmNvbnN0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpO1xuY29uc3QgY29udGV4dCA9IDxDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ+Y2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5jb25zdCBzY29yZUNvdW50ZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlX19jb3VudGVyJyk7XG5jb25zdCBtb2RlQnV0dG9uID0gPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RlJyk7XG5jb25zdCBzdGF0ZU1vZGVCdXR0b24gPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVfX3N0YXRlJyk7XG5cbmNvbnN0IGdyaWQ6IG51bWJlciA9IDE2O1xubGV0IGNvdW50OiBudW1iZXIgPSAwO1xubGV0IGdhbWVTcGVlZDogbnVtYmVyID0gNDtcbmxldCBhcHBsZXNFYXRlbjogbnVtYmVyID0gMDtcbmxldCBtb2RlV2l0aEJvcmRlcnM6IGJvb2xlYW4gPSBmYWxzZTtcblxuY29uc3Qgc25ha2U6IElTbmFrZSA9IHtcbiAgeDogMTYwLFxuICB5OiAxNjAsXG4gIGR4OiBncmlkLFxuICBkeTogMCxcbiAgY2VsbHM6IFtdLFxuICBtYXhDZWxsczogNFxufVxuXG5jb25zdCBhcHBsZTogSUFwcGxlID0ge1xuICB4OiAzMjAsXG4gIHk6IDMyMFxufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXBwbGUoKTogdm9pZCB7XG4gIGFwcGxlLnggPSBnZXRSYW5kb21JbnQoMCwgMjUpICogZ3JpZDtcbiAgYXBwbGUueSA9IGdldFJhbmRvbUludCgwLCAyNSkgKiBncmlkO1xufVxuXG5mdW5jdGlvbiByZXN0YXJ0KCk6IHZvaWQge1xuICBzbmFrZS54ID0gMTYwO1xuICBzbmFrZS55ID0gMTYwO1xuICBzbmFrZS5jZWxscyA9IFtdO1xuICBzbmFrZS5tYXhDZWxscyA9IDQ7XG4gIHNuYWtlLmR4ID0gZ3JpZDtcbiAgc25ha2UuZHkgPSAwO1xuXG4gIGFwcGxlc0VhdGVuID0gMDtcbiAgc2NvcmVDb3VudGVyLnRleHRDb250ZW50ID0gYXBwbGVzRWF0ZW4udG9TdHJpbmcoKTtcblxuICBjcmVhdGVBcHBsZSgpO1xufVxuXG5mdW5jdGlvbiByZWRyYXdHYW1lKHRleHQ6IHN0cmluZywgYWRkQ2xhc3M6IHN0cmluZywgcmVtb3ZlQ2xhc3M6IHN0cmluZyk6IHZvaWQge1xuICBzdGF0ZU1vZGVCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xuICBjYW52YXMuY2xhc3NMaXN0LmFkZChhZGRDbGFzcyk7XG4gIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKHJlbW92ZUNsYXNzKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQm9yZGVycygpIHtcbiAgbW9kZVdpdGhCb3JkZXJzID0gIW1vZGVXaXRoQm9yZGVycztcblxuICBtb2RlV2l0aEJvcmRlcnMgP1xuICAgIHJlZHJhd0dhbWUoJ29uJywgJ2JvcmRlcnNfb24nLCAnYm9yZGVyc19vZmYnKTpcbiAgICByZWRyYXdHYW1lKCdvZmYnLCAnYm9yZGVyc19vZmYnLCAnYm9yZGVyc19vbicpO1xuXG4gIHJlc3RhcnQoKTtcbn1cblxuZnVuY3Rpb24gbG9vcCgpOiB2b2lkIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuXG4gIGlmICgrK2NvdW50IDwgZ2FtZVNwZWVkKSByZXR1cm47XG5cbiAgY291bnQgPSAwO1xuXG4gIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgc25ha2UueCArPSBzbmFrZS5keDtcbiAgc25ha2UueSArPSBzbmFrZS5keTtcblxuICBpZiAoc25ha2UueCA8IDApIG1vZGVXaXRoQm9yZGVycyA/IHJlc3RhcnQoKSA6IHNuYWtlLnggPSBjYW52YXMud2lkdGggLSBncmlkO1xuICBlbHNlIGlmIChzbmFrZS54ID49IGNhbnZhcy53aWR0aCkgbW9kZVdpdGhCb3JkZXJzID8gcmVzdGFydCgpIDogc25ha2UueCA9IDA7XG5cbiAgaWYgKHNuYWtlLnkgPCAwKSBtb2RlV2l0aEJvcmRlcnMgPyByZXN0YXJ0KCkgOiBzbmFrZS55ID0gY2FudmFzLmhlaWdodCAtIGdyaWQ7XG4gIGVsc2UgaWYgKHNuYWtlLnkgPj0gY2FudmFzLmhlaWdodCkgbW9kZVdpdGhCb3JkZXJzID8gcmVzdGFydCgpIDogc25ha2UueSA9IDA7XG5cbiAgc25ha2UuY2VsbHMudW5zaGlmdCh7IHg6IHNuYWtlLngsIHk6IHNuYWtlLnkgfSk7XG5cbiAgc25ha2UuY2VsbHMubGVuZ3RoID4gc25ha2UubWF4Q2VsbHMgJiYgc25ha2UuY2VsbHMucG9wKCk7XG5cbiAgY29udGV4dC5maWxsU3R5bGUgPSAncmVkJztcbiAgY29udGV4dC5maWxsUmVjdChhcHBsZS54LCBhcHBsZS55LCBncmlkIC0gMSwgZ3JpZCAtIDEpO1xuXG4gIGNvbnRleHQuZmlsbFN0eWxlID0gJ2dyZWVuJztcblxuICBzbmFrZS5jZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgIGNvbnRleHQuZmlsbFJlY3QoY2VsbC54LCBjZWxsLnksIGdyaWQgLSAxLCBncmlkIC0gMSk7XG5cbiAgICBpZiAoY2VsbC54ID09PSBhcHBsZS54ICYmIGNlbGwueSA9PT0gYXBwbGUueSkge1xuICAgICAgc25ha2UubWF4Q2VsbHMrKztcblxuICAgICAgY3JlYXRlQXBwbGUoKTtcblxuICAgICAgYXBwbGVzRWF0ZW4rKztcbiAgICAgIHNjb3JlQ291bnRlci50ZXh0Q29udGVudCA9IGFwcGxlc0VhdGVuLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBpbmRleCArIDE7IGkgPCBzbmFrZS5jZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNlbGwueCA9PT0gc25ha2UuY2VsbHNbaV0ueCAmJiBjZWxsLnkgPT09IHNuYWtlLmNlbGxzW2ldLnkpIHtcbiAgICAgICAgcmVzdGFydCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICBzd2l0Y2ggKGUud2hpY2gpe1xuICAgIGNhc2UgMTY6XG4gICAgICAvLyBTaGlmdFxuICAgICAgZ2FtZVNwZWVkID0gMjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjc6XG4gICAgICAvLyBFc2NhcGVcbiAgICAgIHJlc3RhcnQoKTtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAzNzpcbiAgICAgIC8vINCh0YLRgNC10LvQutCwINCy0LvQtdCy0L5cbiAgICAgIGlmIChzbmFrZS5keCA9PT0gMCkge1xuICAgICAgICBzbmFrZS5keCA9IC1ncmlkO1xuICAgICAgICBzbmFrZS5keSA9IDA7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM4OlxuICAgICAgLy8g0KHRgtGA0LXQu9C60LAg0LLQstC10YDRhVxuICAgICAgaWYgKHNuYWtlLmR5ID09PSAwKSB7XG4gICAgICAgIHNuYWtlLmR5ID0gLWdyaWQ7XG4gICAgICAgIHNuYWtlLmR4ID0gMDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzk6XG4gICAgICAvLyDQodGC0YDQtdC70LrQsCDQstC/0YDQsNCy0L5cbiAgICAgIGlmIChzbmFrZS5keCA9PT0gMCkge1xuICAgICAgICBzbmFrZS5keCA9IGdyaWQ7XG4gICAgICAgIHNuYWtlLmR5ID0gMDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDA6XG4gICAgICAvLyDQodGC0YDQtdC70LrQsCDQstC90LjQt1xuICAgICAgaWYgKHNuYWtlLmR5ID09PSAwKSB7XG4gICAgICAgIHNuYWtlLmR5ID0gZ3JpZDtcbiAgICAgICAgc25ha2UuZHggPSAwO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7XG4gIGlmKGUud2hpY2ggPT09IDE2KSB7XG4gICAgZ2FtZVNwZWVkID0gNDtcbiAgfVxufSk7XG5cbm1vZGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHRvZ2dsZUJvcmRlcnMoKTtcbn0pO1xuXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4iXSwibmFtZXMiOlsiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRleHQiLCJnZXRDb250ZXh0Iiwic2NvcmVDb3VudGVyIiwibW9kZUJ1dHRvbiIsInN0YXRlTW9kZUJ1dHRvbiIsImdyaWQiLCJjb3VudCIsImdhbWVTcGVlZCIsImFwcGxlc0VhdGVuIiwibW9kZVdpdGhCb3JkZXJzIiwic25ha2UiLCJ4IiwieSIsImR4IiwiZHkiLCJjZWxscyIsIm1heENlbGxzIiwiYXBwbGUiLCJnZXRSYW5kb21JbnQiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjcmVhdGVBcHBsZSIsInJlc3RhcnQiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwicmVkcmF3R2FtZSIsInRleHQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ3aGljaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInVuc2hpZnQiLCJsZW5ndGgiLCJwb3AiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZvckVhY2giLCJjZWxsIiwiaW5kZXgiLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==